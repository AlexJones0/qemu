# OpenTitan configuration file

Some OpenTitan configuration parameters are sensitive enough to avoid storing them into the QEMU
source code nor the built QEMU binary.

Such configuration parameters are - but not limited to -:
* Keys
* Nonces
* Seeds
* ...

It is possible to load a selected list of configuration parameters from a QEMU configuration file
that the QEMU executable loads at startup, which enables to store those sensitive parameters into
a different location than the QEMU source code and executable.

This configuration file, whose syntax is loosely based on the INI file format, can be read with the
`-readconfig <file.cfg>` QEMU option.

Depending on the machine, the parameters may either override default constants defined in the source
code - such as default cryptographic constants that are already exposed in the public OpenTitan
repository - or be required in the configuration file for the matching device to become functional.

Beware **not** to store such a configuration file into a public repository!

## Syntax

All sections in the configuration files should follow the following scheme:
`[ot_device "<device>[<.ot_id>"]`, where `<device>` is the mandatory OpenTitan device name, and
`<ot_id>` is an optional device instance identifier.

When no `<ot_id>` identifier is provided, the parameter within the sections are applied to all
instances of the selected device.

The separator between the `<device>` and the `<ot_id>` parameter should be a single dot `.`.

The remaning line of the section are (key, value) pairs, expressed as `<key> = <value>`. The `key`
is always a string which is one of the device's supported properties. The value may either be a
string, a unsigned 64-bit integer or boolean, which should match the type of the selected property.

### Example

```ini
[ot_device "ot_dev"]
a_string_prop = "abcde"
an_integer = 0x1234
a_boolean = true
```

## Configurable constants

Constants can usually be retrieved from the OpenTitan autogenerated "top" HSJON file, from the
`hw/<topname>/data/autogen/<topname>.gen.hjson` file.

### ROM controller [rom]

```ini
[ot_device "ot-rom_ctrl.<romid>"]
  # 128-bit key, match RndCnstRomCtrl*ScrKey
  key = "ffeeddccbbaa99887766554433221100"
  # 64-bit nonce, match RndCnstRomCtrl*ScrNonce
  nonce = "0123456789abcdef"
```
where `<romid>` is the ROM identifier as documented [here](rom_ctrl.md#romid)
